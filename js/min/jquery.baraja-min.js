jQuery.fn.reverse=[].reverse,function($,t,i){"use strict";var n=t.Modernizr;$.Baraja=function(t,i){this.$el=$(i),this._init(t)},$.Baraja.defaults={nextEl:"",prevEl:"",speed:300,easing:"ease-in-out"},$.Baraja.prototype={_init:function(t){this.options=$.extend(!0,{},$.Baraja.defaults,t);var i={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};return this.transEndEventName=i[n.prefixed("transition")],this._setDefaultFanSettings(),this.$items=this.$el.children("li"),this.itemsCount=this.$items.length,0===this.itemsCount?!1:(this.supportTransitions=n.csstransitions,this.closed=!0,this.itemZIndexMin=1e3,this._setStack(),void this._initEvents())},_setDefaultFanSettings:function(){this.fanSettings={speed:500,easing:"ease-out",range:90,direction:"right",origin:{x:25,y:100},translation:0,center:!0,scatter:!1}},_validateDefaultFanSettings:function(t){return t.origin?(t.origin.x=t.origin.x||this.fanSettings.origin.x,t.origin.y=t.origin.y||this.fanSettings.origin.y):t.origin=this.fanSettings.origin,t.speed=t.speed||this.fanSettings.speed,t.easing=t.easing||this.fanSettings.easing,t.direction=t.direction||this.fanSettings.direction,t.range=t.range||this.fanSettings.range,t.translation=t.translation||this.fanSettings.translation,t.center==i&&(t.center=this.fanSettings.center),t.scatter==i&&(t.scatter=this.fanSettings.scatter),this.direction=t.direction,t},_setStack:function(t){var i=this;t=t||this.$items,t.each(function(t){$(this).css("z-index",i.itemZIndexMin+i.itemsCount-1-t)})},_updateStack:function(t,i){var n=Number(t.css("z-index")),s="next"===i?this.itemZIndexMin-1:this.itemZIndexMin+this.itemsCount,e="next"===i?"+=1":"-=1";t.css("z-index",s),this.$items.filter(function(){var t=Number($(this).css("z-index")),s="next"===i?n>t:t>n;return s}).css("z-index",e)},_initEvents:function(){var t=this;""!==this.options.nextEl&&$(this.options.nextEl).on("click.baraja",function(){return t._navigate("next"),!1}),""!==this.options.prevEl&&$(this.options.prevEl).on("click.baraja",function(){return t._navigate("prev"),!1}),this.$el.on("click.baraja","li",function(){!t.isAnimating})},_resetTransition:function(t){t.css({"-webkit-transition":"none","-moz-transition":"none","-ms-transition":"none","-o-transition":"none",transition:"none"})},_setOrigin:function(t,i,n){t.css("transform-origin",i+"% "+n+"%")},_setTransition:function(t,i,n,s,e){if(!this.supportTransitions)return!1;i||(i="all"),n||(n=this.options.speed),s||(s=this.options.easing),e||(e=0);var a="";a="transform"===i?{"-webkit-transition":"-webkit-transform "+n+"ms "+s+" "+e+"ms","-moz-transition":"-moz-transform "+n+"ms "+s+" "+e+"ms","-ms-transition":"-ms-transform "+n+"ms "+s+" "+e+"ms","-o-transition":"-o-transform "+n+"ms "+s+" "+e+"ms",transition:"transform "+n+"ms "+s+" "+e+"ms"}:{"-webkit-transition":i+" "+n+"ms "+s+" "+e+"ms","-moz-transition":i+" "+n+"ms "+s+" "+e+"ms","-ms-transition":i+" "+n+"ms "+s+" "+e+"ms","-o-transition":i+" "+n+"ms "+s+" "+e+"ms",transition:i+" "+n+"ms "+s+" "+e+"ms"},t.css(a)},_applyTransition:function(t,i,n,s){this.supportTransitions?(n&&(t.on(this.transEndEventName,n),s&&n.call()),setTimeout(function(){t.css(i)},25)):(t.css(i),n&&n.call())},_navigate:function(t){this.closed=!1;var i=this,n=15,s="next"===t?i.itemZIndexMin+i.itemsCount-1:i.itemZIndexMin,e=this.$items.filter(function(){return Number($(this).css("z-index"))===s}),a="next"===t?e.outerWidth(!0)+n:-1*e.outerWidth(!0)-n,o="next"===t?5:-5;this._setTransition(e,"transform",this.options.speed,this.options.easing),this._applyTransition(e,{transform:"translate("+a+"px) rotate("+o+"deg)"},function(){e.off(i.transEndEventName),i._updateStack(e,t),i._applyTransition(e,{transform:"translate(0px) rotate(0deg)"},function(){e.off(i.transEndEventName),i.isAnimating=!1,i.closed=!0})})},_move2front:function(t){this.isAnimating=!0;var i=this,n=Number(t.css("z-index"))===this.itemZIndexMin+this.itemsCount-1,s=n?function(){i.isAnimating=!1}:function(){return!1},t=n?null:t;return this.closed?this._fan():this._close(s,t),n?!1:(this._resetTransition(t),this._setOrigin(t,50,50),t.css({opacity:0,transform:"scale(2) translate(100px) rotate(20deg)"}),this._updateStack(t,"prev"),void setTimeout(function(){i._setTransition(t,"all",i.options.speed,"ease-in"),i._applyTransition(t,{transform:"none",opacity:1},function(){t.off(i.transEndEventName),i.isAnimating=!1})},this.options.speed/2))},_close:function(t,i){var n=this,s=n.$items,e=this.closed?!0:!1;i&&(s=s.not(i)),this._applyTransition(s,{transform:"none"},function(){n.closed=!0,s.off(n.transEndEventName),n._resetTransition(s),setTimeout(function(){n._setOrigin(s,50,50),t&&t.call()},25)},e)},_fan:function(t){var i=this;if(this.closed=!1,t=this._validateDefaultFanSettings(t||{}),t.origin.minX&&t.origin.maxX){var n=t.origin.maxX,s=t.origin.minX,e=(n-s)/this.itemsCount;this.$items.each(function(a){var o=$(this),r=i.itemsCount-1-(Number(o.css("z-index"))-i.itemZIndexMin),c=r*(n-s+e)/i.itemsCount+s;"left"===t.direction&&(c=n+s-c),i._setOrigin($(this),c,t.origin.y)})}else this._setOrigin(this.$items,t.origin.x,t.origin.y);this._setTransition(this.$items,"transform",t.speed,t.easing);var a=t.range/(this.itemsCount-1),o=t.translation/(this.itemsCount-1),r=0;this.$items.each(function(n){var s=$(this),e=i.itemsCount-1-(Number(s.css("z-index"))-i.itemZIndexMin),c=t.center?t.range/2:t.range,h=c-a*e,m=o*(i.itemsCount-e-1);if("left"===t.direction&&(h*=-1,m*=-1),t.scatter){var f=Math.floor(Math.random()*a),u=Math.floor(Math.random()*o);e!==i.itemsCount-1&&(h="left"===t.direction?h+f:h-f,m="left"===t.direction?m-u:m+u)}s.data({translation:m,rotation:h}),i._applyTransition(s,{transform:"translate("+m+"px) rotate("+h+"deg)"},function(){++r,s.off(i.transEndEventName),r===i.itemsCount-1&&(i.isAnimating=!1)})})},_add:function(t){var i=this,n=t.length,s=0;t.css("opacity",0).appendTo(this.$el),this.$items=this.$el.children("li"),this.itemsCount=this.$items.length,this._setStack(t),t.css("transform","scale(1.8) translate(200px) rotate(15deg)").reverse().each(function(t){var e=$(this);i._setTransition(e,"all",500,"ease-out",200*t),i._applyTransition(e,{transform:"none",opacity:1},function(){++s,e.off(i.transEndEventName),i._resetTransition(e),s===n&&(i.isAnimating=!1)})})},_allowAction:function(){return this.itemsCount>1},_prepare:function(t){var i=this;this.closed?t.call():this._close(function(){t.call()})},_dispatch:function(t,i){var n=this;return(t===this._fan||t===this._navigate)&&!this._allowAction()||this.isAnimating?!1:(this.isAnimating=!0,void this._prepare(function(){t.call(n,i)}))},close:function(t){return this.isAnimating?!1:void this._close()},next:function(){this._dispatch(this._navigate,"next")},previous:function(){this._dispatch(this._navigate,"prev")},fan:function(t){this._dispatch(this._fan,t)},add:function(t){this._dispatch(this._add,t)}};var s=function(i){t.console&&t.console.error(i)};$.fn.baraja=function(t){var i=$.data(this,"baraja");if("string"==typeof t){var n=Array.prototype.slice.call(arguments,1);this.each(function(){return i?$.isFunction(i[t])&&"_"!==t.charAt(0)?void i[t].apply(i,n):void s("no such method '"+t+"' for baraja instance"):void s("cannot call methods on baraja prior to initialization; attempted to call method '"+t+"'")})}else this.each(function(){i?i._init():i=$.data(this,"baraja",new $.Baraja(t,this))});return i}}(jQuery,window);